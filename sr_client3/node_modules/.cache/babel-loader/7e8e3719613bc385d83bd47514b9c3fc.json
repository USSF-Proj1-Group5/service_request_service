{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/petervayda/Documents/proj_galvanize/maintain_yo_self/service_request_service/sr_client3/src/App.js\";\nimport React from 'react';\nimport AddSR from './AddSR';\nimport ListSR from './ListSR';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCurrentSRName = e => {\n      this.setState({\n        currentSR_name: e.target.value\n      });\n    };\n\n    this.handleCurrentTaskID = e => {\n      this.setState({\n        currentSR_task: e.target.value\n      });\n    };\n\n    this.handleCurrentCtr = e => {\n      this.setState({\n        currentSR_contractor: e.target.value\n      });\n    };\n\n    this.handleAddSR = async e => {\n      let addSR = {\n        sr_name: this.state.currentSR_name,\n        sr_task: this.state.currentSR_task,\n        sr_contractor: this.state.currentSR_contractor\n      };\n      this.addSR(addSR);\n      this.setState({\n        toRender: true\n      }); // const newList = await this.getSRList();\n      // this.setState({listSR: newList})\n    };\n\n    this.addSR = async body => {\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      };\n      await fetch(`${this.state.urlAPI}/add_service_request`, requestOptions).then(response => response.json()).then(response => {\n        if (response.status === \"failed\") alert(response.message);\n      });\n    };\n\n    this.handleDeleteSR = async e => {\n      let deleteSR = {\n        id: e.target.value\n      };\n      this.deleteSR(deleteSR); // const newList = await this.getSRList();\n      // this.setState({listSR: newList})\n    };\n\n    this.deleteSR = async body => {\n      const requestOptions = {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      };\n      await fetch(`${this.state.urlAPI}/delete_service_request`, requestOptions).then(response => response.json()).then(response => {\n        if (response.status === \"failed\") alert(response.message);\n      });\n    };\n\n    this.state = {\n      currentSR_name: '',\n      currentSR_task: '',\n      currentSR_contractor: '',\n      listSR: [],\n      urlAPI: 'http://localhost:3001',\n      toRender: true\n    };\n  }\n\n  async componentDidMount() {\n    console.log(\"calling render\");\n    const originalSRList = await this.getSRList();\n    this.setState({\n      listSR: originalSRList,\n      toRender: false\n    });\n  } // async componentDidUpdate() {\n  //   console.log(\"compont did update running\");\n  //   const updateSRList = await this.getSRList();\n  //   this.setState({ listSR: updateSRList });\n  // }\n\n\n  async getSRList() {\n    const response = await fetch(`${this.state.urlAPI}/service_requests`);\n    const json = await response.json();\n    return json;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Service Requests Service \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AddSR, {\n        handleCurrentSRName: this.handleCurrentSRName,\n        handleCurrentTaskID: this.handleCurrentTaskID,\n        handleCurrentCtr: this.handleCurrentCtr,\n        handleAddSR: this.handleAddSR\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListSR, {\n        listSR: this.state.listSR,\n        handleDeleteSR: this.handleDeleteSR\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/petervayda/Documents/proj_galvanize/maintain_yo_self/service_request_service/sr_client3/src/App.js"],"names":["React","AddSR","ListSR","App","Component","constructor","props","handleCurrentSRName","e","setState","currentSR_name","target","value","handleCurrentTaskID","currentSR_task","handleCurrentCtr","currentSR_contractor","handleAddSR","addSR","sr_name","state","sr_task","sr_contractor","toRender","body","requestOptions","method","headers","JSON","stringify","fetch","urlAPI","then","response","json","status","alert","message","handleDeleteSR","deleteSR","id","listSR","componentDidMount","console","log","originalSRList","getSRList","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport AddSR from './AddSR'\nimport ListSR from './ListSR'\n\nclass App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      currentSR_name: '',\n      currentSR_task: '',\n      currentSR_contractor: '',\n      listSR: [],\n      urlAPI: 'http://localhost:3001',\n      toRender: true\n    }\n  }\n  \n\n  async componentDidMount() {\n    console.log(\"calling render\")\n    const originalSRList = await this.getSRList();\n    this.setState({ listSR: originalSRList,\n      toRender: false});\n}\n  // async componentDidUpdate() {\n  //   console.log(\"compont did update running\");\n  //   const updateSRList = await this.getSRList();\n  //   this.setState({ listSR: updateSRList });\n  // }\n  async getSRList() {\n    const response = await fetch(`${this.state.urlAPI}/service_requests`);\n    const json = await response.json();\n    return json;\n  }\n  \n  handleCurrentSRName = (e) => {\n    this.setState({currentSR_name: e.target.value})\n  }\n  handleCurrentTaskID = (e) => {\n    this.setState({currentSR_task: e.target.value})\n  }\n  handleCurrentCtr = (e) => {\n    this.setState({currentSR_contractor: e.target.value})\n  }\n  handleAddSR = async (e) => {\n    let addSR = {sr_name: this.state.currentSR_name,\n     sr_task: this.state.currentSR_task,\n     sr_contractor: this.state.currentSR_contractor\n    }\n    this.addSR(addSR)\n    this.setState({toRender: true})\n    // const newList = await this.getSRList();\n    // this.setState({listSR: newList})\n  }\n  addSR = async (body) => {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(body)\n    };\n    await fetch(`${this.state.urlAPI}/add_service_request`, requestOptions)\n        .then(response => response.json())\n        .then(response => {\n          if(response.status === \"failed\")\n          alert(response.message)})\n\n  }\n  handleDeleteSR = async (e) => {\n    let deleteSR = {\n      id: e.target.value\n    }\n    this.deleteSR(deleteSR);\n    // const newList = await this.getSRList();\n    // this.setState({listSR: newList})\n  }\n  deleteSR = async (body) => {\n    const requestOptions = {\n      method: 'DELETE',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body)\n  };\n    await fetch(`${this.state.urlAPI}/delete_service_request`, requestOptions)\n      .then(response => response.json())\n      .then(response => {\n        if(response.status === \"failed\")\n        alert(response.message)})\n  }\n  render(){\n    return (\n      <div>\n        <h1>Service Requests Service </h1>\n        <AddSR handleCurrentSRName = {this.handleCurrentSRName} handleCurrentTaskID = {this.handleCurrentTaskID} handleCurrentCtr = {this.handleCurrentCtr} handleAddSR = {this.handleAddSR}/>\n        <ListSR listSR = {this.state.listSR} handleDeleteSR={this.handleDeleteSR}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}